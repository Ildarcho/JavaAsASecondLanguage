# Flitter web service

Требуется реализовать несколько REST сервисов.
 
 
### Возвращаемые объекты

Каждый сервис принимает определенные аргументы и возвращает объект следующего вида:
```json
{
  "data": <результат работы метода> ,
  "errorMessage": <сообщение об ошибке>
}
```
Например, метод "добавить пользователя" (/user/register) в случае успеха может вернуть вот такой объект:
```json
{
  "data": {
    "userName": "Sasha",
    "userToken": "7b74505e-e07a-4544-b060-909956d2161c"
  },
  "errorMessage": null
}
```
А в случае ошибки - вот такой:
```json
{
  "data": null,
  "errorMessage": "Пользователь с таким именем уже существует"
}
```

В описании каждого сервиса в пункте "Возвращает" приводится описание того объекта, который должен лежать в поле `data` в случае успешного ответа.  

### Полный перечень сервисов

* "/clear": полностью сбрасывает состояние приложения (удаляет всех пользователей, все сообщения и тд).
    - Метод: DELETE   
    - Принимает: ничего  
    - Возвращает: неважно  

   **Замечание**: этот сервис необходим для тестирования, реализуйте его в первую очередь 
   
-----------------------------------------

* "/user/register": регистрирует нового пользователя с указанным именем и возвращает присвоеный ему токен. Токен используется для аутентификации пользователя и должен быть уникален.
    - Метод: POST   
    - Принимает: объект вида `{"userName": <имя пользователя>}`  
    - Возвращает: объект вида  `{"userName": <имя пользователя>, "userToken": <токен пользователя>}`. Токен должен быть строкой.
    ```
    curl -X POST 'localhost:8080/user/register' -d '{"userName": "Sasha"}' -H "Content-Type: application/json"
    ```
    ```json
    {"userName":"Sasha","userToken":"7b74505e-e07a-4544-b060-909956d2161c"}
    ```
-----------------------------------------
    
* "/user/list": возвращает список имен всех зарегистрированных пользователей.
    ```shell script
    curl 'localhost:8080/user/list'
    ```
    - Метод: GET   
    - Принимает: ничего
    - Возвращает: список имен пользователей

-----------------------------------------

* "/flit/add": добавляет новое сообщение для пользователя с указанным токеном.
    ```shell script
        curl -X POST 'localhost:8080/flit/add' -d '{"userToken": "7b74505e-e07a-4544-b060-909956d2161c", "content": "Hello!"}' -H "Content-Type: application/json"
    ```
    - Метод: POST   
    - Принимает: объект вида `{"userToken": <токен пользователя>, "content": <содержимое сообщения>}`
    - Возвращает: неважно
    
-----------------------------------------

* "/flit/discover": возвращает фид сообшений для пользователя.
    ```shell script
        curl 'localhost:8080/flit/discover' -d '{"userToken": "7b74505e-e07a-4544-b060-909956d2161c"}'
    ```
    - Метод: GET   
    - Принимает: объект вида `{"userName": <имя пользователя>, "userToken": <токен пользователя>}`
    - Возвращает: список объектов вида `{"userName": <имя пользователя>, "content": <содержимое сообщения>}`

-----------------------------------------

* "/flit/list/{username}": возвращает список всех сообщений данного пользователя.
    - Метод: GET   
    - Принимает: параметр пути "username", представляющий имя пользователя
    - Возвращает: список объектов вида `{"userName": <имя пользователя>, "content": <содержимое сообщения>}`

-----------------------------------------

* "/flit/list/feed/{usertoken}": возвращает список всех сообщений от тех, на кого подписан данный пользователь
    - Метод: GET   
    - Принимает: параметр пути "usertoken", представляющий имя пользователя
    - Возвращает: список объектов вида `{"userName": <имя пользователя>, "content": <содержимое сообщения>}`
  
-----------------------------------------

* "/subscribe": добавляет для пользователя с указанным токеном подписку на пользователя с указанным именем
    - Метод: POST   
    - Принимает: объект вида `{"subscriberToken": <токен подписчика>, "publisherName": <имя читаемого пользователя>}`  
    - Возвращает: неважно

-----------------------------------------

* "/unsubscribe": убирает подписку
    - Метод: POST   
    - Принимает: объект вида `{"subscriberToken": <токен подписчика>, "publisherName": <имя читаемого пользователя>}`  
    - Возвращает: неважно

-----------------------------------------

* "/subscribers/list/{usertoken}": возвращает список всех подписчиков пользователя
    - Метод: GET   
    - Принимает: параметр пути "usertoken", представляющий токен пользователя
    - Возвращает: список имен подписчиков

-----------------------------------------

* "/publishers/list/{userToken}": возвращет список всех, на кого подписан данный пользователь
    - Метод: GET   
    - Принимает: параметр пути "usertoken", представляющий токен пользователя
    - Возвращает: список всех, на кого подписан данный пользователь